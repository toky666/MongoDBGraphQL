{"version":3,"file":"8813.js","mappings":"yNA2BO,SAASA,EAAwBC,GACpC,MAAMC,EAAO,IAAIC,YA2BrB,SAAqCF,GACjC,IAAIG,EAAS,EAIb,GAHAA,GAAU,EAGkB,SAAxBH,EAAeI,KACfD,GAAW,EACLH,EAAeK,KAAKC,WAEzB,CACDH,GAAU,EAEVA,GAAU,EAGNH,EAAeO,OAAOD,OAC1B,IAAK,MAAME,KAASR,EAAeO,OAC3BC,EAAMH,OACNF,GAAUK,EAAMH,KAAKC,OAGjC,CACA,OAAOH,CACX,CAlDiCM,CAA4BT,IACzD,IAAIU,EAAS,EAEb,GADAT,EAAKS,KAAYV,EAAeW,GACJ,SAAxBX,EAAeI,KACfH,EAAKS,KAAY,EACjBT,EAAKS,KAAYV,EAAeK,KAAKC,OACrCL,EAAKW,IAAIZ,EAAeK,KAAMK,GAC9BA,GAAUV,EAAeK,KAAKC,WAE7B,CACDL,EAAKS,KAAY,EACjBT,EAAKS,KAAYV,EAAeO,OAAOD,OACvC,IAAK,MAAME,KAASR,EAAeO,OAC/BN,EAAKS,KAAYF,EAAMK,MACvBZ,EAAKS,KAAYF,EAAMM,YACnBN,EAAMH,MACNJ,EAAKS,KAAYF,EAAMH,KAAKC,OAC5BL,EAAKW,IAAIJ,EAAMH,KAAMK,GACrBA,GAAUF,EAAMH,KAAKC,QAGrBL,EAAKS,KAAY,CAG7B,CACA,OAlCJ,SAA8BK,GAC1B,MAAMC,EAAW,IAAIC,WAAWF,EAAIG,OAAQH,EAAII,WAAyB,EAAbJ,EAAIT,QAKhE,OAJK,oBAfT,SAA2BS,GACvB,IAAK,IAAIK,EAAI,EAAGC,EAAMN,EAAIT,OAAQc,EAAIC,EAAKD,GAAK,EAAG,CAE/C,MAAME,EAAKP,EAAIK,EAAI,GACbG,EAAKR,EAAIK,EAAI,GACbI,EAAKT,EAAIK,EAAI,GACbK,EAAKV,EAAIK,EAAI,GACnBL,EAAIK,EAAI,GAAKK,EACbV,EAAIK,EAAI,GAAKI,EACbT,EAAIK,EAAI,GAAKG,EACbR,EAAIK,EAAI,GAAKE,CACjB,CACJ,CAKQI,CAAkBV,GAEf,EAAAW,SAASC,KAAKZ,EACzB,CA2BWa,CAAqB5B,EAChC,C,sDCjDO,MAAM6B,GAAgB,E,SAAAC,iBAAgB,e,kGCElCC,EAuCAC,E,kCAtCX,SAAWD,GACPA,EAAeA,EAAqB,KAAI,GAAK,OAC7CA,EAAeA,EAAqB,KAAI,GAAK,OAC7CA,EAAeA,EAAwB,QAAI,GAAK,UAChDA,EAAeA,EAAsB,MAAI,GAAK,OACjD,CALD,CAKGA,IAAmBA,EAAiB,CAAC,IACxC,SAAWA,GAIPA,EAAeE,QAHf,SAAiBC,EAAGC,GAChB,OAAOA,EAAID,CACf,EAEA,MAAME,EAAkBC,OAAOC,OAAO,MACtCF,EAAgBL,EAAeQ,QAAS,IAAAC,UAAS,YAAa,SAC9DJ,EAAgBL,EAAeU,UAAW,IAAAD,UAAS,cAAe,WAClEJ,EAAgBL,EAAeW,OAAQ,IAAAF,UAAS,WAAY,QAI5DT,EAAeY,SAHf,SAAkBT,GACd,OAAOE,EAAgBF,IAAM,EACjC,EAUAH,EAAea,aARf,SAAsBC,GAClB,OAAQA,GACJ,KAAK,UAASN,MAAO,OAAOR,EAAeQ,MAC3C,KAAK,UAASE,QAAS,OAAOV,EAAeU,QAC7C,KAAK,UAASC,KAAM,OAAOX,EAAeW,KAC1C,KAAK,UAASI,OAAQ,OAAOf,EAAegB,KAEpD,EAUAhB,EAAeiB,WARf,SAAoBH,GAChB,OAAQA,GACJ,KAAKd,EAAeQ,MAAO,OAAO,UAASA,MAC3C,KAAKR,EAAeU,QAAS,OAAO,UAASA,QAC7C,KAAKV,EAAeW,KAAM,OAAO,UAASA,KAC1C,KAAKX,EAAegB,KAAM,OAAO,UAASD,OAElD,CAEH,CA/BD,CA+BGf,IAAmBA,EAAiB,CAAC,IAExC,SAAWC,GACP,MAAMiB,EAAc,GAKpB,SAASC,EAAuBC,EAAYC,GACxC,MAAMlD,EAAS,CAAC+C,GAyDhB,OAxDIE,EAAWE,OACXnD,EAAOoD,KAAKH,EAAWE,OAAOE,QAAQ,IAAK,QAG3CrD,EAAOoD,KAAKL,GAEZE,EAAWK,KACoB,iBAApBL,EAAWK,KAClBtD,EAAOoD,KAAKH,EAAWK,KAAKD,QAAQ,IAAK,QAGzCrD,EAAOoD,KAAKH,EAAWK,KAAKC,MAAMF,QAAQ,IAAK,QAInDrD,EAAOoD,KAAKL,QAEYS,IAAxBP,EAAWN,UAAkD,OAAxBM,EAAWN,SAChD3C,EAAOoD,KAAKvB,EAAeY,SAASQ,EAAWN,WAG/C3C,EAAOoD,KAAKL,GAIZE,EAAWQ,SAAWP,EACtBlD,EAAOoD,KAAKH,EAAWQ,QAAQJ,QAAQ,IAAK,QAG5CrD,EAAOoD,KAAKL,QAEmBS,IAA/BP,EAAWS,iBAAgE,OAA/BT,EAAWS,gBACvD1D,EAAOoD,KAAKH,EAAWS,gBAAgBjB,YAGvCzC,EAAOoD,KAAKL,QAEeS,IAA3BP,EAAWU,aAAwD,OAA3BV,EAAWU,YACnD3D,EAAOoD,KAAKH,EAAWU,YAAYlB,YAGnCzC,EAAOoD,KAAKL,QAEiBS,IAA7BP,EAAWW,eAA4D,OAA7BX,EAAWW,cACrD5D,EAAOoD,KAAKH,EAAWW,cAAcnB,YAGrCzC,EAAOoD,KAAKL,QAEaS,IAAzBP,EAAWY,WAAoD,OAAzBZ,EAAWY,UACjD7D,EAAOoD,KAAKH,EAAWY,UAAUpB,YAGjCzC,EAAOoD,KAAKL,GAEhB/C,EAAOoD,KAAKL,GACL/C,EAAO8D,KAAK,IACvB,CA5DAhC,EAAYiC,QAHZ,SAAiBd,GACb,OAAOD,EAAuBC,GAAY,EAC9C,EA8DAnB,EAAYkB,uBAAyBA,CACxC,CAnED,CAmEGlB,IAAgBA,EAAc,CAAC,IAC3B,MAAMkC,GAAiB,IAAApC,iBAAgB,gB,6DC9GvC,MAAMqC,GAAuB,E,SAAArC,iBAAgB,sB,yMCKhDsC,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUC,EAAQC,GAAOF,EAAUC,EAAQC,EAAKH,EAAa,CACxE,EASO,MAAMI,GAAkC,IAAA3C,iBAAgB,mCAC/D,IAAI4C,GACJ,SAAWA,GACP,MAAMC,EAAU,IAAIC,QACpB,IAAIC,EAAO,EASXH,EAAaI,GARb,SAAYC,GACR,IAAItB,EAAQkB,EAAQK,IAAID,GAKxB,YAJcrB,IAAVD,IACAA,IAAUoB,EACVF,EAAQhE,IAAIoE,EAAKtB,IAEdA,CACX,CAEH,CAZD,CAYGiB,IAAiBA,EAAe,CAAC,IACpC,MAAMO,EACF,WAAAC,CAAYC,GACRC,KAAKD,SAAWA,CACpB,CACA,GAAAH,CAAIK,GACA,OAAOD,KAAKD,QAChB,CACA,MAAAG,CAAOD,EAAQE,GACX,OAAOH,KAAKD,QAChB,CACA,UACI,OAAOC,KAAKD,QAChB,EAEJ,MAAMK,EACF,WAAAN,CAAYO,EAAaC,EAAOC,EAAWR,EAAUS,EAAMC,GACvDT,KAAKK,YAAcA,EACnBL,KAAKM,MAAQA,EACbN,KAAKO,UAAYA,EACjBP,KAAKD,SAAWA,EAChBC,KAAKQ,KAAOA,EACZR,KAAKS,KAAOA,EACZT,KAAKU,OAAS,IAAI,EAAAC,SAAS,GAAI,GACnC,CACA,IAAAC,CAAKC,GACD,OAAOA,EAAMvF,GAAK0E,KAAKO,UAAUO,IAAID,GAAOE,OAAO,CAACC,EAASrB,KAAQ,IAAAsB,QAAO3B,EAAaI,GAAGC,GAAMqB,GAAU,EAChH,CACA,GAAApB,CAAIiB,GACA,MAAMzB,EAAMY,KAAKY,KAAKC,GAChBK,EAAMlB,KAAKU,OAAOd,IAAIR,GAC5B,OAAO8B,GACD,IAAAC,OAAMD,EAAI7C,MAAO2B,KAAKQ,KAAMR,KAAKS,MACjCT,KAAKoB,SACf,CACA,MAAAlB,CAAOW,EAAOxC,GACV,MAAMe,EAAMY,KAAKY,KAAKC,GACtB,IAAIK,EAAMlB,KAAKU,OAAOd,IAAIR,GACrB8B,IACDA,EAAM,IAAI,EAAAG,qBAAqB,GAC/BrB,KAAKU,OAAOnF,IAAI6D,EAAK8B,IAEzB,MAAMI,GAAW,IAAAH,OAAMD,EAAIhB,OAAO7B,GAAQ2B,KAAKQ,KAAMR,KAAKS,MAI1D,OAHK,IAAAc,eAAcV,EAAMW,IAAK,WAC1BxB,KAAKK,YAAYoB,MAAM,cAAczB,KAAKM,cAAcO,EAAMW,IAAIjE,iBAAiB+D,OAEhFA,CACX,CACA,QAAAI,GACI,MAAM5G,EAAS,IAAI,EAAA6G,cACnB,IAAK,MAAO,CAAET,KAAQlB,KAAKU,OACvB5F,EAAOoF,OAAOgB,EAAI7C,OAEtB,OAAOvD,EAAOuD,KAClB,CACA,UACI,MAAMA,EAA2B,EAAlB2B,KAAK0B,YAAmB1B,KAAKD,SAC5C,OAAO,IAAAoB,OAAM9C,EAAO2B,KAAKQ,KAAMR,KAAKS,KACxC,EAEJ,IAAImB,EAAiC,MACjC,WAAA9B,CAAYO,EAAawB,GACrB7B,KAAKK,YAAcA,EACnBL,KAAK8B,MAAQ,IAAIC,IACjB/B,KAAKgC,OAASH,EAAWI,yBAA2BJ,EAAWK,OACnE,CACA,IAAIC,EAASC,EAAMC,GACf,MAAMC,EAAMD,GAAQC,KAAO,GACrBC,EAAMF,GAAQE,KAAOD,GAAO,EAC5BE,EAAQH,GAAQjD,UAAOd,EACvBc,EAAM,GAAGE,EAAaI,GAAGyC,MAAYG,IAAME,EAAQ,IAAMA,EAAQ,KACvE,IAAIC,EAAOzC,KAAK8B,MAAMlC,IAAIR,GAY1B,OAXKqD,IACGzC,KAAKgC,QACLhC,KAAKK,YAAYqC,MAAM,cAAcN,oCACrCK,EAAO,IAAI5C,EAA8B,IAANyC,IAGnCG,EAAO,IAAIrC,EAA2BJ,KAAKK,YAAa+B,EAAMD,EAAmC,EAAzBnC,KAAK2C,mBAAiC,IAANL,EACxGA,EAAKC,GAETvC,KAAK8B,MAAMvG,IAAI6D,EAAKqD,IAEjBA,CACX,CACA,eAAAE,GAEI,MAAM7H,EAAS,IAAI,EAAA6G,cACnB,IAAK,MAAMc,KAAQzC,KAAK8B,MAAMc,SAC1B9H,EAAOoF,OAAOuC,EAAKrB,WAEvB,OAAOtG,EAAOuD,KAClB,GAEJuD,EA7H8C,SAAUiB,EAAY1D,EAAQC,EAAK0D,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUhI,OAAQiI,EAAIF,EAAI,EAAI7D,EAAkB,OAAT2D,EAAgBA,EAAO7F,OAAOkG,yBAAyBhE,EAAQC,GAAO0D,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAY1D,EAAQC,EAAK0D,QACpH,IAAK,IAAI/G,EAAI8G,EAAW5H,OAAS,EAAGc,GAAK,EAAGA,KAASgH,EAAIF,EAAW9G,MAAImH,GAAKF,EAAI,EAAID,EAAEG,GAAKF,EAAI,EAAID,EAAE5D,EAAQC,EAAK8D,GAAKH,EAAE5D,EAAQC,KAAS8D,GAChJ,OAAOF,EAAI,GAAKE,GAAKjG,OAAOqG,eAAenE,EAAQC,EAAK8D,GAAIA,CAChE,CAwHiCK,CAAW,CACxCvE,EAAQ,EAAG,EAAAwE,aACXxE,EAAQ,EAAG,EAAAyE,sBACZ7B,IAEH,IAAA8B,mBAAkBrE,EAAiCuC,EAAgC,E,qJC5H/E5C,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUC,EAAQC,GAAOF,EAAUC,EAAQC,EAAKH,EAAa,CACxE,EAQA,IAAI0E,EAA+B,cAA2C,EAAAC,WAC1E,WAAA9D,CAAY+D,EAAexD,EAAayD,GACpCC,QACA/D,KAAK6D,cAAgBA,EACrB7D,KAAKK,YAAcA,EACnBL,KAAK8D,iBAAmBA,EACxB9D,KAAKgE,QAAU,IAAIxE,QACnBQ,KAAKiE,UAAUjE,KAAK6D,cAAcK,sBAAsB,KACpDlE,KAAKgE,QAAU,IAAIxE,UAE3B,CACA,UAAA2E,CAAWC,GAIP,OAHKpE,KAAKgE,QAAQK,IAAID,IAClBpE,KAAKgE,QAAQzI,IAAI6I,EAAU,IAAI,EAAAE,8BAA8BF,EAASG,YAAavE,KAAK6D,cAAe7D,KAAK8D,iBAAkB9D,KAAKK,cAEhIL,KAAKgE,QAAQpE,IAAIwE,EAC5B,GAEJT,EAlC8C,SAAUd,EAAY1D,EAAQC,EAAK0D,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUhI,OAAQiI,EAAIF,EAAI,EAAI7D,EAAkB,OAAT2D,EAAgBA,EAAO7F,OAAOkG,yBAAyBhE,EAAQC,GAAO0D,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAY1D,EAAQC,EAAK0D,QACpH,IAAK,IAAI/G,EAAI8G,EAAW5H,OAAS,EAAGc,GAAK,EAAGA,KAASgH,EAAIF,EAAW9G,MAAImH,GAAKF,EAAI,EAAID,EAAEG,GAAKF,EAAI,EAAID,EAAE5D,EAAQC,EAAK8D,GAAKH,EAAE5D,EAAQC,KAAS8D,GAChJ,OAAOF,EAAI,GAAKE,GAAKjG,OAAOqG,eAAenE,EAAQC,EAAK8D,GAAIA,CAChE,CA6B+BK,CAAW,CACtCvE,EAAQ,EAAG,EAAAwF,eACXxF,EAAQ,EAAG,EAAAwE,aACXxE,EAAQ,EAAG,EAAAyF,mBACZd,IAEH,IAAAD,mBAAkB,EAAAgB,8BAA+Bf,EAA8B,E,6FCxCxE,MAAMgB,EACT,WAAA7E,GACIE,KAAK4E,gBAAkB,IAAI7C,GAC/B,CACA,2BAAA8C,CAA4BC,GACxB,GAAKA,GAAQ9E,KAAK4E,gBAAgBP,IAAIS,GAAQ,CAC1C,MAAMC,EAAY/E,KAAK4E,gBAAgBhF,IAAIkF,GAE3C,OADA9E,KAAK4E,gBAAgBI,OAAOF,GACrBC,CACX,CAEJ,EAEG,MAAME,EACT,WAAAnF,CAAYoF,GACRlF,KAAKkF,WAAaA,CACtB,E,iECfG,MAAMC,GAA2B,E,SAAAzI,iBAAgB,2B,kBCDjD,SAAS0I,EAASC,EAAQC,GAC7B,MAAMC,EAAU,GACVC,EAAQ,GACd,IAAK,MAAMC,KAAWJ,EACbC,EAAMjB,IAAIoB,IACXF,EAAQrH,KAAKuH,GAGrB,IAAK,MAAMA,KAAWH,EACbD,EAAOhB,IAAIoB,IACZD,EAAMtH,KAAKuH,GAGnB,MAAO,CAAEF,UAASC,QACtB,CAQO,SAASE,EAAaC,EAAMC,GAC/B,MAAM9K,EAAS,IAAI+K,IACnB,IAAK,MAAMC,KAAQF,EACXD,EAAKtB,IAAIyB,IACThL,EAAOiL,IAAID,GAGnB,OAAOhL,CACX,C,oMCxBA,MAAMkL,EAAyB,mCACxB,SAASC,EAAeC,EAAcC,EAAiBC,EAAUC,EAAUC,GAC9E,GAAI,EAAAC,UAAUC,YAAYF,GACtB,MAAO,CAAC,WAAWA,EAAKhL,KAAM,wBAElC,GAAI,EAAAmL,IAAIC,MAAMJ,GACV,MAAO,GAGX,MAAMK,EAAUN,IAAa,EAAAO,SAASC,YAAc,CAAC,mBAAqBR,IAAa,EAAAO,SAASE,OAAS,CAAC,eAAiB,CAAC,aAC5H,GAAIV,EAAU,CAEV,IAAIhE,EACJ,GAAIgE,EAASW,SAAW,EAAAC,QAAQhM,KAE5BoH,EADiB,EAAA6E,QAAQC,cAAcd,GACvBxG,IAAI,EAAAqH,QAAQE,qBAE3B,CACD,MAAMC,EAAQhB,EAASiB,KAAKD,MAAMpB,GAC9BoB,GACAhF,EAAOkF,EAAUF,EAAM,GAAGG,eACtBH,EAAM,IACNT,EAAQzI,KAAK,GAAGoJ,EAAUF,EAAM,GAAGG,iCAIvCnF,EAAOkF,EAAUlB,EAASoB,UAAUD,cAE5C,CAEA,GAAIlB,IAAa,EAAAO,SAASC,YACtBF,EAAQzI,KAAK,GAAGkE,gCAGf,GAAIiE,IAAa,EAAAO,SAASE,OAC3BH,EAAQzI,KAAK,GAAGkE,0BAGf,CAED,GAAIA,EAAM,CAMN,GALAuE,EAAQzI,KAAK,GAAGkE,oBAChBuE,EAAQzI,KAAK,kBAITkE,EAAKnH,QAAU,IAAK,CACpB,MAAMwM,EAAcrF,EAAKsF,MAAM,KAC/B,IAAK,IAAI3L,EAAI,EAAGA,EAAI0L,EAAYxM,OAAQc,IACpC4K,EAAQzI,KAAK,GAAGuJ,EAAYE,MAAM5L,GAAG6C,KAAK,qBAElD,CACA+H,EAAQzI,KAAK,gBACjB,CAEA,MAAM0J,EAQlB,SAA0B1B,EAAcC,EAAiBC,GACrD,IAAKA,EACD,OAAO,KAEX,IAAIyB,EAAa,KAEjB,GAAIzB,EAASW,SAAW,EAAAC,QAAQhM,KAAM,CAClC,MACM8M,EADW,EAAAb,QAAQC,cAAcd,GACjBxG,IAAI,EAAAqH,QAAQc,gBAC9BD,IACAD,EAAa1B,EAAgB6B,wBAAwBF,GAE7D,KAEK,CACD,MAAMjH,EAAQqF,EAAa+B,SAAS7B,GAChCvF,IACAgH,EAAahH,EAAMqH,gBAE3B,CAEA,OAAIL,GAAcA,IAAe,EAAAM,sBACtBN,EAGJ1B,EAAgBiC,qCAAqChC,EAChE,CAlCuCiC,CAAiBnC,EAAcC,EAAiBC,GACvEwB,GACAjB,EAAQzI,KAAK,GAAGoJ,EAAUM,oBAElC,CACJ,CACA,OAAOjB,CACX,CA4BA,SAASW,EAAUgB,GACf,OAAOA,EAAInK,QAAQ,QAAS,IAChC,C,gHC9FA,SAASoK,EAAYC,GACjB,MAAwB,iBAAbA,IAGFC,MAAMC,QAAQF,GACZA,EAASG,MAAMJ,KAGbC,EAASI,UAE1B,CACA,MAAMC,EACF,WAAA/I,CAAY0B,EAAKqG,EAAYiB,EAAaC,EAAcC,GACpDhJ,KAAKwB,IAAMA,EACXxB,KAAK6H,WAAaA,EAClB7H,KAAK8I,YAAcA,EACnB9I,KAAK+I,aAAeA,EACpB/I,KAAKgJ,UAAYA,CACrB,CACA,MAAAC,CAAOC,GACH,OAAOlJ,KAAK+I,eAAiBG,EAAMH,cAC5B/I,KAAK6H,aAAeqB,EAAMrB,YAC1B7H,KAAKwB,IAAIjE,aAAe2L,EAAM1H,IAAIjE,YAClCyC,KAAK8I,aAAavL,aAAe2L,EAAMJ,aAAavL,YACpDyC,KAAKgJ,YAAcE,EAAMF,SACpC,EAEG,MAAMG,EACT,WAAArJ,CAAYsJ,GACRpJ,KAAKoJ,sBAAwBA,EAC7BpJ,KAAKqJ,OAAS,EACdrJ,KAAKsJ,SAAW,GAChBtJ,KAAKuJ,aAAe,IAAI,EAAAC,QACxBxJ,KAAKyJ,YAAczJ,KAAKuJ,aAAaG,KACzC,CACA,QAAAC,CAASnB,EAAUpE,GACf,IAAIwF,EAAQ,CACRpB,WACApE,WACAyF,QAAS,EACTC,MAAO9J,KAAKqJ,UAKhB,OAHArJ,KAAKsJ,SAASpL,KAAK0L,GACnB5J,KAAK+J,oBAAiBzL,EACtB0B,KAAKuJ,aAAaS,KAAKhK,KAAKsJ,SAASrO,SAC9B,IAAAgP,cAAa,KAChB,GAAIL,EAAO,CACP,MAAMM,EAAMlK,KAAKsJ,SAASa,QAAQP,GAC9BM,GAAO,IACPlK,KAAKsJ,SAASc,OAAOF,EAAK,GAC1BlK,KAAK+J,oBAAiBzL,EACtB0B,KAAKuJ,aAAaS,KAAKhK,KAAKsJ,SAASrO,QACrC2O,OAAQtL,EAEhB,GAER,CACA,GAAA+F,CAAIxD,GACA,OAAOb,KAAKc,IAAID,GAAO5F,OAAS,CACpC,CACA,GAAA6F,CAAID,GACA,IAAKA,EACD,MAAO,GAEXb,KAAKqK,cAAcxJ,GAAO,GAC1B,MAAM/F,EAAS,GAEf,IAAK,MAAM8O,KAAS5J,KAAKsJ,SACjBM,EAAMC,OAAS,GACf/O,EAAOoD,KAAK0L,EAAMxF,UAG1B,OAAOtJ,CACX,CACA,OAAAwP,CAAQzJ,EAAOmI,GAAY,GACvB,MAAMlO,EAAS,GAEf,OADAkF,KAAKuK,gBAAgB1J,EAAOmI,EAAWY,GAAS9O,EAAOoD,KAAK0L,EAAMxF,WAC3DtJ,CACX,CACA,aAAA0P,CAAc3J,GACV,MAAM/F,EAAS,GACf,IAAI2P,EACAC,EAWJ,OAVA1K,KAAKuK,gBAAgB1J,GAAO,EAAO+I,IAC3Ba,GAAcC,IAAoBd,EAAMC,OACxCY,EAAWvM,KAAK0L,EAAMxF,WAGtBsG,EAAkBd,EAAMC,OACxBY,EAAa,CAACb,EAAMxF,UACpBtJ,EAAOoD,KAAKuM,MAGb3P,CACX,CACA,eAAAyP,CAAgB1J,EAAOmI,EAAW2B,GAC9B3K,KAAKqK,cAAcxJ,EAAOmI,GAC1B,IAAK,MAAMY,KAAS5J,KAAKsJ,SACjBM,EAAMC,OAAS,GACfc,EAASf,EAGrB,CACA,aAAAS,CAAcxJ,EAAOmI,GACjB,MAAM4B,EAAe5K,KAAKoJ,wBAAwBvI,EAAMW,KAGlDqJ,EAAYD,EACZ,IAAI/B,EAAehI,EAAMW,IAAKX,EAAMqH,gBAAiB0C,EAAapJ,IAAKoJ,EAAa7P,KAAMiO,GAC1F,IAAIH,EAAehI,EAAMW,IAAKX,EAAMqH,qBAAiB5J,OAAWA,EAAW0K,GACjF,IAAIhJ,KAAK+J,gBAAgBd,OAAO4B,GAAhC,CAIA7K,KAAK+J,eAAiBc,EACtB,IAAK,MAAMjB,KAAS5J,KAAKsJ,SAErB,GADAM,EAAMC,QAAS,IAAAiB,OAAMlB,EAAMpB,SAAUqC,EAAUrJ,IAAKqJ,EAAUhD,YAAY,IAAAkD,wBAAuBlK,GAAQgK,EAAU/B,YAAa+B,EAAU9B,cACtIR,EAAYqB,EAAMpB,WAAaoB,EAAMC,OAAS,EAAG,CACjD,IAAIb,EAGC,CAGD,IAAK,MAAMY,KAAS5J,KAAKsJ,SACrBM,EAAMC,OAAS,EAEnBD,EAAMC,OAAS,IACf,KACJ,CAVID,EAAMC,OAAS,CAWvB,CAGJ7J,KAAKsJ,SAAS0B,KAAK7B,EAAwB8B,uBApB3C,CAqBJ,CACA,6BAAOA,CAAuBnO,EAAGC,GAC7B,OAAID,EAAE+M,OAAS9M,EAAE8M,OACN,EAEF/M,EAAE+M,OAAS9M,EAAE8M,QACV,EAGRqB,EAAkBpO,EAAE0L,YAAc0C,EAAkBnO,EAAEyL,UAC/C,GAED0C,EAAkBpO,EAAE0L,WAAa0C,EAAkBnO,EAAEyL,WACnD,EAER1L,EAAEgN,MAAQ/M,EAAE+M,MACL,EAEFhN,EAAEgN,MAAQ/M,EAAE+M,OACT,EAGD,CAEf,EAEJ,SAASoB,EAAkB1C,GACvB,MAAwB,iBAAbA,IAGPC,MAAMC,QAAQF,GACPA,EAAS2C,KAAKD,GAElBE,QAAQ5C,EAAS6C,WAC5B,C,0BCzKO,MAAMC,EACT,WAAAxL,GACIE,KAAKuL,kBAAoB,IAAIpC,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACtEA,KAAKyL,eAAiB,IAAItC,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACnEA,KAAK0L,uBAAyB,IAAIvC,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC3EA,KAAK2L,mBAAqB,IAAIxC,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACvEA,KAAK4L,mBAAqB,IAAIzC,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACvEA,KAAK6L,uBAAyB,IAAI1C,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC3EA,KAAK8L,oBAAsB,IAAI3C,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACxEA,KAAK+L,uBAAyB,IAAI5C,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC3EA,KAAKgM,uBAAyB,IAAI7C,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC3EA,KAAKiM,mBAAqB,IAAI9C,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACvEA,KAAKkM,cAAgB,IAAI/C,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAClEA,KAAKmM,iBAAmB,IAAIhD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACrEA,KAAKoM,+BAAiC,IAAIjD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACnFA,KAAKqM,oCAAsC,IAAIlD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACxFA,KAAKsM,6BAA+B,IAAInD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACjFA,KAAKuM,sBAAwB,IAAIpD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC1EA,KAAKwM,cAAgB,IAAIrD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAClEA,KAAKyM,0BAA4B,IAAItD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC9EA,KAAK0M,+BAAiC,IAAIvD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACnFA,KAAK2M,uBAAyB,IAAIxD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC3EA,KAAK4M,qBAAuB,IAAIzD,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACzEA,KAAK6M,aAAe,IAAI1D,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACjEA,KAAK8M,0BAA4B,IAAI3D,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC9EA,KAAK+M,mBAAqB,IAAI5D,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACvEA,KAAKgN,mBAAqB,IAAI7D,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACvEA,KAAKiN,2BAA6B,IAAI9D,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC/EA,KAAKkN,oCAAsC,IAAI/D,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACxFA,KAAKmN,+BAAiC,IAAIhE,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OACnFA,KAAKoN,yBAA2B,IAAIjE,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,OAC7EA,KAAKqN,0BAA4B,IAAIlE,EAAwBnJ,KAAK6J,OAAO2B,KAAKxL,MAClF,CACA,MAAA6J,CAAOrI,GACH,OAAOxB,KAAKsN,wBAAwB9L,EACxC,GAEJ,IAAAkC,mBAAkB,EAAAyB,yBAA0BmG,EAAyB,E,0DC3C9D,MAAMiC,GAAoB,E,SAAA7Q,iBAAgB,mB,oDCI7C8Q,E,YACJ,SAAWA,GACPA,EAASA,EAAiB,OAAI,GAAK,SACnCA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAkB,QAAI,GAAK,UACpCA,EAASA,EAAgB,MAAI,GAAK,OACrC,CALD,CAKGA,IAAaA,EAAW,CAAC,IAC5B,SAAWA,GACP,MAAMC,EAAS,QACTC,EAAW,UAEXC,EAAQ,OAqBdH,EAASI,UAfT,SAAmBvP,GACf,OAAKA,EAGD,mBAAyBoP,EAAQpP,GAC1BmP,EAASrQ,MAEhB,mBAAyBuQ,EAAUrP,IAAU,mBAdvC,OAcuEA,GACtEmP,EAASnQ,QAEhB,mBAAyBsQ,EAAOtP,GACzBmP,EAASlQ,KAEbkQ,EAAS9P,OAXL8P,EAAS9P,MAYxB,EAUA8P,EAASjQ,SART,SAAkBE,GACd,OAAQA,GACJ,KAAK+P,EAASrQ,MAAO,OAAOsQ,EAC5B,KAAKD,EAASnQ,QAAS,OAAOqQ,EAC9B,KAAKF,EAASlQ,KAAM,OAAOqQ,EAC3B,QAAS,MA1BD,SA4BhB,CAEH,CAnCD,CAmCGH,IAAaA,EAAW,CAAC,IAC5B,S,kBC9CO,IAAI5G,E,+BACX,SAAWA,GACPA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAiB,OAAI,GAAK,SACnCA,EAASA,EAAsB,YAAI,GAAK,aAC3C,CAJD,CAIGA,IAAaA,EAAW,CAAC,G,4DCNrB,MAAMnD,GAAsB,E,SAAA/G,iBAAgB,qB,kBCG5C,SAASyE,EAAM9C,EAAOiE,EAAKC,GAC9B,OAAOsL,KAAKvL,IAAIuL,KAAKtL,IAAIlE,EAAOiE,GAAMC,EAC1C,C,2EACO,MAAMZ,EACT,WAAA7B,GACIE,KAAK8N,GAAK,EACV9N,KAAK+N,KAAO,CAChB,CACA,MAAA7N,CAAO7B,GAGH,OAFA2B,KAAK+N,KAAO/N,KAAK+N,MAAQ1P,EAAQ2B,KAAK+N,MAAQ/N,KAAK8N,GACnD9N,KAAK8N,IAAM,EACJ9N,KAAK+N,IAChB,CACA,SAAI1P,GACA,OAAO2B,KAAK+N,IAChB,EAEG,MAAM1M,EACT,WAAAvB,CAAYkO,GACRhO,KAAK8N,GAAK,EACV9N,KAAK+N,KAAO,EACZ/N,KAAKiO,QAAU,GACfjO,KAAKkO,OAAS,EACdlO,KAAKmO,KAAO,EACZnO,KAAKiO,QAAU,IAAIxF,MAAMuF,GACzBhO,KAAKiO,QAAQG,KAAK,EAAG,EAAGJ,EAC5B,CACA,MAAA9N,CAAO7B,GACH,MAAMgQ,EAAWrO,KAAKiO,QAAQjO,KAAKkO,QASnC,OARAlO,KAAKiO,QAAQjO,KAAKkO,QAAU7P,EAC5B2B,KAAKkO,QAAUlO,KAAKkO,OAAS,GAAKlO,KAAKiO,QAAQhT,OAC/C+E,KAAKmO,MAAQE,EACbrO,KAAKmO,MAAQ9P,EACT2B,KAAK8N,GAAK9N,KAAKiO,QAAQhT,SACvB+E,KAAK8N,IAAM,GAEf9N,KAAK+N,KAAO/N,KAAKmO,KAAOnO,KAAK8N,GACtB9N,KAAK+N,IAChB,CACA,SAAI1P,GACA,OAAO2B,KAAK+N,IAChB,E,yMCnCA/O,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUC,EAAQC,GAAOF,EAAUC,EAAQC,EAAKH,EAAa,CACxE,EAaA,IAAIqP,EAA2B,cAAuC,EAAA1K,WAClE,WAAA9D,CAAYoG,EAAcqI,GACtBxK,QACA/D,KAAKuO,eAAiBA,EACtBvO,KAAKwO,mBAAqBxO,KAAKiE,UAAU,IAAI,EAAAuF,SAC7CxJ,KAAKyO,mBAAqB,IAAI,EAAAC,YAC9BxI,EAAayI,YAAYC,QAAQ/N,GAASb,KAAK6O,cAAchO,IAC7Db,KAAKiE,UAAUiC,EAAa4I,aAAa9O,KAAK6O,cAAe7O,OAC7DA,KAAKiE,UAAUiC,EAAa6I,eAAe/O,KAAKgP,gBAAiBhP,OACjEA,KAAKiE,UAAUjE,KAAKuO,eAAeU,gBAAgBjP,KAAKkP,oBAAqBlP,MACjF,CACA,OAAAmP,GACIpL,MAAMoL,UACNnP,KAAKyO,mBAAmBG,QAAQvQ,GAASA,EAAM8Q,WAC/CnP,KAAKyO,mBAAmBW,OAC5B,CACA,SAAAC,CAAU7N,EAAK8N,GACX,MAAMC,EAAoBvP,KAAKyO,mBAAmB7O,IAAI4B,GACtD,OAAO+N,GAAqBA,EAAkBF,UAAUC,IAAuB,IACnF,CACA,mBAAAJ,CAAoBM,GAChBA,EAAiBZ,QAASxI,IACtB,MAAMmJ,EAAoBvP,KAAKyO,mBAAmB7O,IAAIwG,GAClDmJ,GACAvP,KAAKyP,mBAAmBF,IAGpC,CACA,aAAAV,CAAchO,GACV,MAAM0O,EAAoB,IAAIG,EAAkB7O,GAChDb,KAAKyO,mBAAmBlT,IAAIsF,EAAMW,IAAK+N,GACvCvP,KAAKyP,mBAAmBF,EAC5B,CACA,eAAAP,CAAgBnO,GACZ,MAAM0O,EAAoBvP,KAAKyO,mBAAmB7O,IAAIiB,EAAMW,KACxD+N,IACAA,EAAkBJ,UAClBnP,KAAKyO,mBAAmBzJ,OAAOnE,EAAMW,MAGrCX,EAAMW,IAAIuF,SAAW,EAAAC,QAAQ2I,UAC1B9O,EAAMW,IAAIuF,SAAW,EAAAC,QAAQ4I,UAC7B/O,EAAMW,IAAIuF,SAAW,EAAAC,QAAQ6I,QAChC7P,KAAKuO,gBAAgBuB,KAAK,CAAE1J,SAAUvF,EAAMW,MAAOuO,IAAIC,GAAUA,EAAOC,OAAOrB,QAAQqB,GAASjQ,KAAKuO,eAAe2B,OAAOD,EAAO,CAACpP,EAAMW,MAEjJ,CACA,kBAAAiO,CAAmBF,GAEf,MAAMY,EAAUnQ,KAAKuO,eAAeuB,KAAK,CAAE1J,SAAUmJ,EAAkB1O,MAAMW,IAAK4O,KAAM,MACpFb,EAAkBrP,OAAOiQ,IACzBnQ,KAAKwO,mBAAmBxE,KAAKuF,EAAkB1O,MAEvD,GAEJyN,EA3E8C,SAAUzL,EAAY1D,EAAQC,EAAK0D,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUhI,OAAQiI,EAAIF,EAAI,EAAI7D,EAAkB,OAAT2D,EAAgBA,EAAO7F,OAAOkG,yBAAyBhE,EAAQC,GAAO0D,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAY1D,EAAQC,EAAK0D,QACpH,IAAK,IAAI/G,EAAI8G,EAAW5H,OAAS,EAAGc,GAAK,EAAGA,KAASgH,EAAIF,EAAW9G,MAAImH,GAAKF,EAAI,EAAID,EAAEG,GAAKF,EAAI,EAAID,EAAE5D,EAAQC,EAAK8D,GAAKH,EAAE5D,EAAQC,KAAS8D,GAChJ,OAAOF,EAAI,GAAKE,GAAKjG,OAAOqG,eAAenE,EAAQC,EAAK8D,GAAIA,CAChE,CAsE2BK,CAAW,CAClCvE,EAAQ,EAAG,EAAAvC,eACXuC,EAAQ,EAAG,EAAAF,iBACZwP,GAEH,MAAMoB,UAA0B,EAAA9L,WAC5B,WAAA9D,CAAYe,GACRkD,QACA/D,KAAKa,MAAQA,EACbb,KAAKqQ,KAAO,IAAI,EAAAC,iBAChBtQ,KAAKiE,WAAU,IAAAgG,cAAa,KACxBjK,KAAKa,MAAM0P,iBAAiB,IAAIvQ,KAAKqQ,KAAKzN,UAAW,IACrD5C,KAAKqQ,KAAKjB,UAElB,CACA,MAAAlP,CAAOiQ,GAGH,MAAM,MAAE3K,EAAK,QAAED,IAAY,IAAAH,UAAS,IAAIS,IAAI7F,KAAKqQ,KAAKG,QAAS,IAAI3K,IAAIsK,IACvE,GAAqB,IAAjB3K,EAAMvK,QAAmC,IAAnBsK,EAAQtK,OAC9B,OAAO,EAEX,MAAMwV,EAASlL,EAAQwK,IAAIC,GAAUhQ,KAAKqQ,KAAKzQ,IAAIoQ,IAC7CU,EAAiBlL,EAAMuK,IAAIC,IACtB,CACHW,MAAO3Q,KAAK4Q,uBAAuB5Q,KAAKa,MAAOmP,GAC/Ca,QAAS7Q,KAAK8Q,wBAAwBd,MAGxCe,EAAM/Q,KAAKa,MAAM0P,iBAAiBE,EAAQC,GAChD,IAAK,MAAMM,KAAiBzL,EACxBvF,KAAKqQ,KAAKrL,OAAOgM,GAErB,IAAK,IAAIC,EAAQ,EAAGA,EAAQF,EAAI9V,OAAQgW,IACpCjR,KAAKqQ,KAAK9U,IAAIiK,EAAMyL,GAAQF,EAAIE,IAEpC,OAAO,CACX,CACA,SAAA5B,CAAUC,GACN,OAAOtP,KAAKqQ,KAAKa,OAAO5B,EAAWhU,GACvC,CACA,sBAAAsV,CAAuB/P,EAAOsQ,GAC1B,IAAIC,EAAM,EAAAC,MAAMC,KAAKH,GAOrB,GANIA,EAAU1T,WAAa,EAAAd,eAAegB,MAASqC,KAAKuR,cAAcJ,EAAW,IAAmCnR,KAAKuR,cAAcJ,EAAW,KAG9IC,EAAMA,EAAII,eAAeJ,EAAI5S,gBAAiB4S,EAAI3S,YAAc,IAEpE2S,EAAMvQ,EAAM4Q,cAAcL,GACtBA,EAAIM,UAAW,CACf,MAAMC,EAAY9Q,EAAM+Q,+BAA+BR,EAAI5S,kBACvDqC,EAAMgR,iBAAiBT,EAAI5S,iBAC/B,GAAkB,IAAdmT,GAAmBP,EAAIzS,WAAagT,EAGpC,OAAOP,EAEX,MAAMU,EAAOjR,EAAMkR,kBAAkBX,EAAIY,oBACrCF,IACAV,EAAM,IAAI,EAAAC,MAAMD,EAAI5S,gBAAiBsT,EAAKrT,YAAa2S,EAAI1S,cAAeoT,EAAKnT,WAEvF,MACK,GAAIwS,EAAUxS,YAAcsT,OAAOC,WAAuC,IAA1Bf,EAAU1S,aAAqB2S,EAAI5S,kBAAoB4S,EAAI1S,cAAe,CAC3H,MAAMyT,EAAYtR,EAAMuR,gCAAgCjB,EAAU3S,iBAC9D2T,EAAYf,EAAIzS,YAChByS,EAAM,IAAI,EAAAC,MAAMD,EAAI5S,gBAAiB2T,EAAWf,EAAI1S,cAAe0S,EAAIzS,WACvEwS,EAAU1S,YAAc0T,EAEhC,CACA,OAAOf,CACX,CACA,uBAAAN,CAAwBd,GACpB,IAAIqC,EACAC,EACAC,EACAC,EACAC,EACJ,OAAQzC,EAAOvS,UACX,KAAK,EAAAd,eAAegB,KAEZ0U,EADArS,KAAKuR,cAAcvB,EAAQ,QACf1R,EAEP0B,KAAKuR,cAAcvB,EAAQ,GACpB,uBAGA,gBAEhBuC,EAAS,EACT,MACJ,KAAK,EAAA5V,eAAeW,KAChB+U,EAAY,gBACZC,GAAQ,IAAAI,kBAAiB,EAAAC,mBACzBJ,EAAS,GACTE,EAAU,CACNH,OAAO,IAAAI,kBAAiB,EAAAE,aACxBC,SAAU,GAEd,MACJ,KAAK,EAAAlW,eAAeU,QAChBgV,EAAY,mBACZC,GAAQ,IAAAI,kBAAiB,EAAAI,sBACzBP,EAAS,GACTE,EAAU,CACNH,OAAO,IAAAI,kBAAiB,EAAAK,gBACxBF,SAAU,GAEd,MACJ,KAAK,EAAAlW,eAAeQ,MACpB,QACIkV,EAAY,iBACZC,GAAQ,IAAAI,kBAAiB,EAAAM,oBACzBT,EAAS,GACTE,EAAU,CACNH,OAAO,IAAAI,kBAAiB,EAAAO,cACxBJ,SAAU,GAYtB,OARI7C,EAAOkD,QACqD,IAAxDlD,EAAOkD,KAAK/I,QAAQ,KACpBqI,EAAkB,gCAEqC,IAAvDxC,EAAOkD,KAAK/I,QAAQ,KACpBqI,EAAkB,+BAGnB,CACHW,YAAa,oBACbC,WAAY,EACZf,YACAgB,iBAAiB,EACjBC,cAAe,CACXhB,QACAO,SAAU,EAAAU,kBAAkBC,OAEhCf,UACAF,SACAC,kBAER,CACA,aAAAjB,CAAcvB,EAAQyD,GAClB,QAAIzD,EAAOkD,MACAlD,EAAOkD,KAAK/I,QAAQsJ,IAAQ,CAG3C,E,sEC5NG,MAAM/O,GAAgC,E,SAAAhI,iBAAgB,+B,wECCtD,SAASoO,EAAMtC,EAAUkL,EAAcC,EAAmBC,EAAyBC,EAAsBC,GAC5G,GAAIrL,MAAMC,QAAQF,GAAW,CAEzB,IAAI4I,EAAM,EACV,IAAK,MAAM2C,KAAUvL,EAAU,CAC3B,MAAMnK,EAAQyM,EAAMiJ,EAAQL,EAAcC,EAAmBC,EAAyBC,EAAsBC,GAC5G,GAAc,KAAVzV,EACA,OAAOA,EAEPA,EAAQ+S,IACRA,EAAM/S,EAEd,CACA,OAAO+S,CACX,CACK,GAAwB,iBAAb5I,EACZ,OAAKoL,EAMY,MAAbpL,EACO,EAEFA,IAAamL,EACX,GAGA,EAZA,EAeV,GAAInL,EAAU,CAEf,MAAM,SAAEwL,EAAQ,QAAEC,EAAO,OAAElN,EAAM,qBAAEmN,EAAoB,aAAEnL,GAAiBP,EAC1E,IAAKoL,IAA4BM,EAC7B,OAAO,EAIPnL,GAAgB8K,IAChBH,EAAeG,GAEnB,IAAIzC,EAAM,EACV,GAAIrK,EACA,GAAIA,IAAW2M,EAAa3M,OACxBqK,EAAM,OAEL,IAAe,MAAXrK,EAIL,OAAO,EAHPqK,EAAM,CAIV,CAEJ,GAAI4C,EACA,GAAIA,IAAaL,EACbvC,EAAM,OAEL,IAAiB,MAAb4C,EAIL,OAAO,EAHP5C,EAAMvD,KAAKtL,IAAI6O,EAAK,EAIxB,CAEJ,GAAIrI,EACA,GAAIA,IAAiB+K,EACjB1C,EAAM,OAEL,IAAqB,MAAjBrI,QAAkDzK,IAA1BwV,EAI7B,OAAO,EAHP1C,EAAMvD,KAAKtL,IAAI6O,EAAK,EAIxB,CAEJ,GAAI6C,EAAS,CACT,IAAIE,EAYJ,GAVIA,EADmB,iBAAZF,EACaA,EAQA,IAAKA,EAASG,MAAM,IAAAC,WAAUJ,EAAQG,OAE1DD,IAAsBT,EAAaY,UAAU,IAAAlN,OAAiB+M,EAAmBT,EAAaY,QAI9F,OAAO,EAHPlD,EAAM,EAKd,CACA,OAAOA,CACX,CAEI,OAAO,CAEf,C,kECvGO,MAAMmD,GAA4B,E,SAAA7X,iBAAgB,2B,uECA9C8X,EAOAjO,E,YANX,SAAWiO,GAIPA,EAAWC,aAHX,SAAsB9U,GAClB,OAAOA,GAAsB,iBAARA,GAAsC,iBAAXA,EAAIrE,EACxD,CAEH,CALD,CAKGkZ,IAAeA,EAAa,CAAC,IAEhC,SAAWjO,GACPA,EAAUmO,gBAAkB,eAC5BnO,EAAUoO,mBAAqB,gBAC/BpO,EAAUqO,uBAAyB,aACnCrO,EAAUsO,kBAAoB,gBAC9B,MAAMC,EAAmB,IAAIC,OAAO,KAAKxO,EAAUoO,uBAAuBpO,EAAUqO,6BACpF,SAASI,EAAiB1O,GACtB,MAAMc,EAAQ0N,EAAiBG,KAAK3O,EAAKhL,IACzC,IAAK8L,EACD,OAAO4N,EAAiB,EAAAE,QAAQC,OAEpC,MAAO,CAAE7Z,EAAI8Z,GAAYhO,EACnBiO,EAAa,CAAC,UAAW,WAAa/Z,GAI5C,OAHI8Z,GACAC,EAAWnX,KAAK,oBAAsBkX,EAASE,UAAU,IAEtDD,CACX,CACA9O,EAAUyO,iBAAmBA,EAI7BzO,EAAUgP,YAHV,SAAqBjP,GACjB,OAAO0O,EAAiB1O,GAAM1H,KAAK,IACvC,EAKA2H,EAAUiP,cAHV,SAAuBlP,GACnB,MAAO,IAAM0O,EAAiB1O,GAAM1H,KAAK,IAC7C,EAKA2H,EAAUC,YAHV,SAAqB7G,GACjB,OAAOA,GAAsB,iBAARA,GAAsC,iBAAXA,EAAIrE,UAAyC,IAAdqE,EAAI2S,OAAyBkC,EAAWC,aAAa9U,EAAI2S,OAC5I,EAEA,MAAMmD,EAAmB,IAAIV,OAAO,WAAWxO,EAAUoO,wBAAwBpO,EAAUqO,iCAS3FrO,EAAUmP,WARV,SAAoBpN,GAChB,MAAMlB,EAAQqO,EAAiBR,KAAK3M,GACpC,IAAKlB,EACD,OAEJ,MAAO,CAAEhF,GAAQgF,EACjB,MAAO,CAAE9L,GAAI8G,EACjB,EAKAmE,EAAUoP,OAHV,SAAgBra,GACZ,MAAO,CAAEA,KACb,EAaAiL,EAAUqP,OAXV,SAAgBtP,EAAM8O,GAClB,IAAI9Z,EAAKgL,EAAKhL,GACd,MAAMua,EAAava,EAAGwa,YAAY,KAOlC,OANoB,IAAhBD,IACAva,EAAKA,EAAGga,UAAU,EAAGO,IAErBT,IACA9Z,EAAK,GAAGA,KAAM8Z,KAEX,CAAE9Z,KACb,EASAiL,EAAUwP,YAPV,SAAqBzP,GACjB,MAAMuP,EAAavP,EAAKhL,GAAGwa,YAAY,KACvC,IAAoB,IAAhBD,EACA,OAAOvP,EAAKhL,GAAGga,UAAUO,EAAa,EAG9C,EAKAtP,EAAUyP,QAHV,SAAiBC,EAAKC,GAClB,OAAOD,EAAI3a,KAAO4a,EAAI5a,IAAM2a,EAAI3D,OAAOhX,KAAO4a,EAAI5D,OAAOhX,EAC7D,CAEH,CArED,CAqEGiL,IAAcA,EAAY,CAAC,G,kGC3EvB,MAAM4P,GAAuB,IAAAzZ,iBAAgB,wBACpD,IAAAgH,mBAAkByS,EAAsB,EAAAxR,oBAAqB,E","sources":["webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/model.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/platform/markers/common/markers.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/base/common/collections.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/base/common/severity.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/platform/files/common/files.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/platform/environment/common/environment.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/base/common/numbers.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/languageSelector.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/base/common/themables.js","webpack://ruru/../../node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport * as platform from '../../../base/common/platform.js';\nfunction reverseEndianness(arr) {\n    for (let i = 0, len = arr.length; i < len; i += 4) {\n        // flip bytes 0<->3 and 1<->2\n        const b0 = arr[i + 0];\n        const b1 = arr[i + 1];\n        const b2 = arr[i + 2];\n        const b3 = arr[i + 3];\n        arr[i + 0] = b3;\n        arr[i + 1] = b2;\n        arr[i + 2] = b1;\n        arr[i + 3] = b0;\n    }\n}\nfunction toLittleEndianBuffer(arr) {\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n    if (!platform.isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    return VSBuffer.wrap(uint8Arr);\n}\nexport function encodeSemanticTokensDto(semanticTokens) {\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n    let offset = 0;\n    dest[offset++] = semanticTokens.id;\n    if (semanticTokens.type === 'full') {\n        dest[offset++] = 1 /* EncodedSemanticTokensType.Full */;\n        dest[offset++] = semanticTokens.data.length;\n        dest.set(semanticTokens.data, offset);\n        offset += semanticTokens.data.length;\n    }\n    else {\n        dest[offset++] = 2 /* EncodedSemanticTokensType.Delta */;\n        dest[offset++] = semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            dest[offset++] = delta.start;\n            dest[offset++] = delta.deleteCount;\n            if (delta.data) {\n                dest[offset++] = delta.data.length;\n                dest.set(delta.data, offset);\n                offset += delta.data.length;\n            }\n            else {\n                dest[offset++] = 0;\n            }\n        }\n    }\n    return toLittleEndianBuffer(dest);\n}\nfunction encodeSemanticTokensDtoSize(semanticTokens) {\n    let result = 0;\n    result += (+1 // id\n        + 1 // type\n    );\n    if (semanticTokens.type === 'full') {\n        result += (+1 // data length\n            + semanticTokens.data.length);\n    }\n    else {\n        result += (+1 // delta count\n        );\n        result += (+1 // start\n            + 1 // deleteCount\n            + 1 // data length\n        ) * semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            if (delta.data) {\n                result += delta.data.length;\n            }\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IModelService = createDecorator('modelService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport Severity from '../../../base/common/severity.js';\nimport { localize } from '../../../nls.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport var MarkerSeverity;\n(function (MarkerSeverity) {\n    MarkerSeverity[MarkerSeverity[\"Hint\"] = 1] = \"Hint\";\n    MarkerSeverity[MarkerSeverity[\"Info\"] = 2] = \"Info\";\n    MarkerSeverity[MarkerSeverity[\"Warning\"] = 4] = \"Warning\";\n    MarkerSeverity[MarkerSeverity[\"Error\"] = 8] = \"Error\";\n})(MarkerSeverity || (MarkerSeverity = {}));\n(function (MarkerSeverity) {\n    function compare(a, b) {\n        return b - a;\n    }\n    MarkerSeverity.compare = compare;\n    const _displayStrings = Object.create(null);\n    _displayStrings[MarkerSeverity.Error] = localize('sev.error', \"Error\");\n    _displayStrings[MarkerSeverity.Warning] = localize('sev.warning', \"Warning\");\n    _displayStrings[MarkerSeverity.Info] = localize('sev.info', \"Info\");\n    function toString(a) {\n        return _displayStrings[a] || '';\n    }\n    MarkerSeverity.toString = toString;\n    function fromSeverity(severity) {\n        switch (severity) {\n            case Severity.Error: return MarkerSeverity.Error;\n            case Severity.Warning: return MarkerSeverity.Warning;\n            case Severity.Info: return MarkerSeverity.Info;\n            case Severity.Ignore: return MarkerSeverity.Hint;\n        }\n    }\n    MarkerSeverity.fromSeverity = fromSeverity;\n    function toSeverity(severity) {\n        switch (severity) {\n            case MarkerSeverity.Error: return Severity.Error;\n            case MarkerSeverity.Warning: return Severity.Warning;\n            case MarkerSeverity.Info: return Severity.Info;\n            case MarkerSeverity.Hint: return Severity.Ignore;\n        }\n    }\n    MarkerSeverity.toSeverity = toSeverity;\n})(MarkerSeverity || (MarkerSeverity = {}));\nexport var IMarkerData;\n(function (IMarkerData) {\n    const emptyString = '';\n    function makeKey(markerData) {\n        return makeKeyOptionalMessage(markerData, true);\n    }\n    IMarkerData.makeKey = makeKey;\n    function makeKeyOptionalMessage(markerData, useMessage) {\n        const result = [emptyString];\n        if (markerData.source) {\n            result.push(markerData.source.replace('¦', '\\\\¦'));\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.code) {\n            if (typeof markerData.code === 'string') {\n                result.push(markerData.code.replace('¦', '\\\\¦'));\n            }\n            else {\n                result.push(markerData.code.value.replace('¦', '\\\\¦'));\n            }\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.severity !== undefined && markerData.severity !== null) {\n            result.push(MarkerSeverity.toString(markerData.severity));\n        }\n        else {\n            result.push(emptyString);\n        }\n        // Modifed to not include the message as part of the marker key to work around\n        // https://github.com/microsoft/vscode/issues/77475\n        if (markerData.message && useMessage) {\n            result.push(markerData.message.replace('¦', '\\\\¦'));\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.startLineNumber !== undefined && markerData.startLineNumber !== null) {\n            result.push(markerData.startLineNumber.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.startColumn !== undefined && markerData.startColumn !== null) {\n            result.push(markerData.startColumn.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.endLineNumber !== undefined && markerData.endLineNumber !== null) {\n            result.push(markerData.endLineNumber.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.endColumn !== undefined && markerData.endColumn !== null) {\n            result.push(markerData.endColumn.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        result.push(emptyString);\n        return result.join('¦');\n    }\n    IMarkerData.makeKeyOptionalMessage = makeKeyOptionalMessage;\n})(IMarkerData || (IMarkerData = {}));\nexport const IMarkerService = createDecorator('markerService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IEditorWorkerService = createDecorator('editorWorkerService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { doHash } from '../../../base/common/hash.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport { clamp, MovingAverage, SlidingWindowAverage } from '../../../base/common/numbers.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { matchesScheme } from '../../../base/common/network.js';\nexport const ILanguageFeatureDebounceService = createDecorator('ILanguageFeatureDebounceService');\nvar IdentityHash;\n(function (IdentityHash) {\n    const _hashes = new WeakMap();\n    let pool = 0;\n    function of(obj) {\n        let value = _hashes.get(obj);\n        if (value === undefined) {\n            value = ++pool;\n            _hashes.set(obj, value);\n        }\n        return value;\n    }\n    IdentityHash.of = of;\n})(IdentityHash || (IdentityHash = {}));\nclass NullDebounceInformation {\n    constructor(_default) {\n        this._default = _default;\n    }\n    get(_model) {\n        return this._default;\n    }\n    update(_model, _value) {\n        return this._default;\n    }\n    default() {\n        return this._default;\n    }\n}\nclass FeatureDebounceInformation {\n    constructor(_logService, _name, _registry, _default, _min, _max) {\n        this._logService = _logService;\n        this._name = _name;\n        this._registry = _registry;\n        this._default = _default;\n        this._min = _min;\n        this._max = _max;\n        this._cache = new LRUCache(50, 0.7);\n    }\n    _key(model) {\n        return model.id + this._registry.all(model).reduce((hashVal, obj) => doHash(IdentityHash.of(obj), hashVal), 0);\n    }\n    get(model) {\n        const key = this._key(model);\n        const avg = this._cache.get(key);\n        return avg\n            ? clamp(avg.value, this._min, this._max)\n            : this.default();\n    }\n    update(model, value) {\n        const key = this._key(model);\n        let avg = this._cache.get(key);\n        if (!avg) {\n            avg = new SlidingWindowAverage(6);\n            this._cache.set(key, avg);\n        }\n        const newValue = clamp(avg.update(value), this._min, this._max);\n        if (!matchesScheme(model.uri, 'output')) {\n            this._logService.trace(`[DEBOUNCE: ${this._name}] for ${model.uri.toString()} is ${newValue}ms`);\n        }\n        return newValue;\n    }\n    _overall() {\n        const result = new MovingAverage();\n        for (const [, avg] of this._cache) {\n            result.update(avg.value);\n        }\n        return result.value;\n    }\n    default() {\n        const value = (this._overall() | 0) || this._default;\n        return clamp(value, this._min, this._max);\n    }\n}\nlet LanguageFeatureDebounceService = class LanguageFeatureDebounceService {\n    constructor(_logService, envService) {\n        this._logService = _logService;\n        this._data = new Map();\n        this._isDev = envService.isExtensionDevelopment || !envService.isBuilt;\n    }\n    for(feature, name, config) {\n        const min = config?.min ?? 50;\n        const max = config?.max ?? min ** 2;\n        const extra = config?.key ?? undefined;\n        const key = `${IdentityHash.of(feature)},${min}${extra ? ',' + extra : ''}`;\n        let info = this._data.get(key);\n        if (!info) {\n            if (this._isDev) {\n                this._logService.debug(`[DEBOUNCE: ${name}] is disabled in developed mode`);\n                info = new NullDebounceInformation(min * 1.5);\n            }\n            else {\n                info = new FeatureDebounceInformation(this._logService, name, feature, (this._overallAverage() | 0) || (min * 1.5), // default is overall default or derived from min-value\n                min, max);\n            }\n            this._data.set(key, info);\n        }\n        return info;\n    }\n    _overallAverage() {\n        // Average of all language features. Not a great value but an approximation\n        const result = new MovingAverage();\n        for (const info of this._data.values()) {\n            result.update(info.default());\n        }\n        return result.value;\n    }\n};\nLanguageFeatureDebounceService = __decorate([\n    __param(0, ILogService),\n    __param(1, IEnvironmentService)\n], LanguageFeatureDebounceService);\nexport { LanguageFeatureDebounceService };\nregisterSingleton(ILanguageFeatureDebounceService, LanguageFeatureDebounceService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ILanguageService } from '../languages/language.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { SemanticTokensProviderStyling } from './semanticTokensProviderStyling.js';\nimport { ISemanticTokensStylingService } from './semanticTokensStyling.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nlet SemanticTokensStylingService = class SemanticTokensStylingService extends Disposable {\n    constructor(_themeService, _logService, _languageService) {\n        super();\n        this._themeService = _themeService;\n        this._logService = _logService;\n        this._languageService = _languageService;\n        this._caches = new WeakMap();\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._caches = new WeakMap();\n        }));\n    }\n    getStyling(provider) {\n        if (!this._caches.has(provider)) {\n            this._caches.set(provider, new SemanticTokensProviderStyling(provider.getLegend(), this._themeService, this._languageService, this._logService));\n        }\n        return this._caches.get(provider);\n    }\n};\nSemanticTokensStylingService = __decorate([\n    __param(0, IThemeService),\n    __param(1, ILogService),\n    __param(2, ILanguageService)\n], SemanticTokensStylingService);\nexport { SemanticTokensStylingService };\nregisterSingleton(ISemanticTokensStylingService, SemanticTokensStylingService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class TreeViewsDnDService {\n    constructor() {\n        this._dragOperations = new Map();\n    }\n    removeDragOperationTransfer(uuid) {\n        if ((uuid && this._dragOperations.has(uuid))) {\n            const operation = this._dragOperations.get(uuid);\n            this._dragOperations.delete(uuid);\n            return operation;\n        }\n        return undefined;\n    }\n}\nexport class DraggedTreeItemsIdentifier {\n    constructor(identifier) {\n        this.identifier = identifier;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ILanguageFeaturesService = createDecorator('ILanguageFeaturesService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function diffSets(before, after) {\n    const removed = [];\n    const added = [];\n    for (const element of before) {\n        if (!after.has(element)) {\n            removed.push(element);\n        }\n    }\n    for (const element of after) {\n        if (!before.has(element)) {\n            added.push(element);\n        }\n    }\n    return { removed, added };\n}\n/**\n * Computes the intersection of two sets.\n *\n * @param setA - The first set.\n * @param setB - The second iterable.\n * @returns A new set containing the elements that are in both `setA` and `setB`.\n */\nexport function intersection(setA, setB) {\n    const result = new Set();\n    for (const elem of setB) {\n        if (setA.has(elem)) {\n            result.add(elem);\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\nexport function getIconClasses(modelService, languageService, resource, fileKind, icon) {\n    if (ThemeIcon.isThemeIcon(icon)) {\n        return [`codicon-${icon.id}`, 'predefined-file-icon'];\n    }\n    if (URI.isUri(icon)) {\n        return [];\n    }\n    // we always set these base classes even if we do not have a path\n    const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n    if (resource) {\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\n        let name;\n        if (resource.scheme === Schemas.data) {\n            const metadata = DataUri.parseMetaData(resource);\n            name = metadata.get(DataUri.META_DATA_LABEL);\n        }\n        else {\n            const match = resource.path.match(fileIconDirectoryRegex);\n            if (match) {\n                name = cssEscape(match[2].toLowerCase());\n                if (match[1]) {\n                    classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\n                }\n            }\n            else {\n                name = cssEscape(resource.authority.toLowerCase());\n            }\n        }\n        // Root Folders\n        if (fileKind === FileKind.ROOT_FOLDER) {\n            classes.push(`${name}-root-name-folder-icon`);\n        }\n        // Folders\n        else if (fileKind === FileKind.FOLDER) {\n            classes.push(`${name}-name-folder-icon`);\n        }\n        // Files\n        else {\n            // Name & Extension(s)\n            if (name) {\n                classes.push(`${name}-name-file-icon`);\n                classes.push(`name-file-icon`); // extra segment to increase file-name score\n                // Avoid doing an explosive combination of extensions for very long filenames\n                // (most file systems do not allow files > 255 length) with lots of `.` characters\n                // https://github.com/microsoft/vscode/issues/116199\n                if (name.length <= 255) {\n                    const dotSegments = name.split('.');\n                    for (let i = 1; i < dotSegments.length; i++) {\n                        classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\n                    }\n                }\n                classes.push(`ext-file-icon`); // extra segment to increase file-ext score\n            }\n            // Detected Mode\n            const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\n            if (detectedLanguageId) {\n                classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\n            }\n        }\n    }\n    return classes;\n}\nfunction detectLanguageId(modelService, languageService, resource) {\n    if (!resource) {\n        return null; // we need a resource at least\n    }\n    let languageId = null;\n    // Data URI: check for encoded metadata\n    if (resource.scheme === Schemas.data) {\n        const metadata = DataUri.parseMetaData(resource);\n        const mime = metadata.get(DataUri.META_DATA_MIME);\n        if (mime) {\n            languageId = languageService.getLanguageIdByMimeType(mime);\n        }\n    }\n    // Any other URI: check for model if existing\n    else {\n        const model = modelService.getModel(resource);\n        if (model) {\n            languageId = model.getLanguageId();\n        }\n    }\n    // only take if the language id is specific (aka no just plain text)\n    if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\n        return languageId;\n    }\n    // otherwise fallback to path based detection\n    return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n}\nfunction cssEscape(str) {\n    return str.replace(/[\\s]/g, '/'); // HTML class names can not contain certain whitespace characters (https://dom.spec.whatwg.org/#interface-domtokenlist), use / instead, which doesn't exist in file names.\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../base/common/event.js';\nimport { toDisposable } from '../../base/common/lifecycle.js';\nimport { shouldSynchronizeModel } from './model.js';\nimport { score } from './languageSelector.js';\nfunction isExclusive(selector) {\n    if (typeof selector === 'string') {\n        return false;\n    }\n    else if (Array.isArray(selector)) {\n        return selector.every(isExclusive);\n    }\n    else {\n        return !!selector.exclusive; // TODO: microsoft/TypeScript#42768\n    }\n}\nclass MatchCandidate {\n    constructor(uri, languageId, notebookUri, notebookType, recursive) {\n        this.uri = uri;\n        this.languageId = languageId;\n        this.notebookUri = notebookUri;\n        this.notebookType = notebookType;\n        this.recursive = recursive;\n    }\n    equals(other) {\n        return this.notebookType === other.notebookType\n            && this.languageId === other.languageId\n            && this.uri.toString() === other.uri.toString()\n            && this.notebookUri?.toString() === other.notebookUri?.toString()\n            && this.recursive === other.recursive;\n    }\n}\nexport class LanguageFeatureRegistry {\n    constructor(_notebookInfoResolver) {\n        this._notebookInfoResolver = _notebookInfoResolver;\n        this._clock = 0;\n        this._entries = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    register(selector, provider) {\n        let entry = {\n            selector,\n            provider,\n            _score: -1,\n            _time: this._clock++\n        };\n        this._entries.push(entry);\n        this._lastCandidate = undefined;\n        this._onDidChange.fire(this._entries.length);\n        return toDisposable(() => {\n            if (entry) {\n                const idx = this._entries.indexOf(entry);\n                if (idx >= 0) {\n                    this._entries.splice(idx, 1);\n                    this._lastCandidate = undefined;\n                    this._onDidChange.fire(this._entries.length);\n                    entry = undefined;\n                }\n            }\n        });\n    }\n    has(model) {\n        return this.all(model).length > 0;\n    }\n    all(model) {\n        if (!model) {\n            return [];\n        }\n        this._updateScores(model, false);\n        const result = [];\n        // from registry\n        for (const entry of this._entries) {\n            if (entry._score > 0) {\n                result.push(entry.provider);\n            }\n        }\n        return result;\n    }\n    ordered(model, recursive = false) {\n        const result = [];\n        this._orderedForEach(model, recursive, entry => result.push(entry.provider));\n        return result;\n    }\n    orderedGroups(model) {\n        const result = [];\n        let lastBucket;\n        let lastBucketScore;\n        this._orderedForEach(model, false, entry => {\n            if (lastBucket && lastBucketScore === entry._score) {\n                lastBucket.push(entry.provider);\n            }\n            else {\n                lastBucketScore = entry._score;\n                lastBucket = [entry.provider];\n                result.push(lastBucket);\n            }\n        });\n        return result;\n    }\n    _orderedForEach(model, recursive, callback) {\n        this._updateScores(model, recursive);\n        for (const entry of this._entries) {\n            if (entry._score > 0) {\n                callback(entry);\n            }\n        }\n    }\n    _updateScores(model, recursive) {\n        const notebookInfo = this._notebookInfoResolver?.(model.uri);\n        // use the uri (scheme, pattern) of the notebook info iff we have one\n        // otherwise it's the model's/document's uri\n        const candidate = notebookInfo\n            ? new MatchCandidate(model.uri, model.getLanguageId(), notebookInfo.uri, notebookInfo.type, recursive)\n            : new MatchCandidate(model.uri, model.getLanguageId(), undefined, undefined, recursive);\n        if (this._lastCandidate?.equals(candidate)) {\n            // nothing has changed\n            return;\n        }\n        this._lastCandidate = candidate;\n        for (const entry of this._entries) {\n            entry._score = score(entry.selector, candidate.uri, candidate.languageId, shouldSynchronizeModel(model), candidate.notebookUri, candidate.notebookType);\n            if (isExclusive(entry.selector) && entry._score > 0) {\n                if (recursive) {\n                    entry._score = 0;\n                }\n                else {\n                    // support for one exclusive selector that overwrites\n                    // any other selector\n                    for (const entry of this._entries) {\n                        entry._score = 0;\n                    }\n                    entry._score = 1000;\n                    break;\n                }\n            }\n        }\n        // needs sorting\n        this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);\n    }\n    static _compareByScoreAndTime(a, b) {\n        if (a._score < b._score) {\n            return 1;\n        }\n        else if (a._score > b._score) {\n            return -1;\n        }\n        // De-prioritize built-in providers\n        if (isBuiltinSelector(a.selector) && !isBuiltinSelector(b.selector)) {\n            return 1;\n        }\n        else if (!isBuiltinSelector(a.selector) && isBuiltinSelector(b.selector)) {\n            return -1;\n        }\n        if (a._time < b._time) {\n            return 1;\n        }\n        else if (a._time > b._time) {\n            return -1;\n        }\n        else {\n            return 0;\n        }\n    }\n}\nfunction isBuiltinSelector(selector) {\n    if (typeof selector === 'string') {\n        return false;\n    }\n    if (Array.isArray(selector)) {\n        return selector.some(isBuiltinSelector);\n    }\n    return Boolean(selector.isBuiltin);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageFeatureRegistry } from '../languageFeatureRegistry.js';\nimport { ILanguageFeaturesService } from './languageFeatures.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nexport class LanguageFeaturesService {\n    constructor() {\n        this.referenceProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.renameProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.newSymbolNamesProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.codeActionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.definitionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.typeDefinitionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.declarationProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.implementationProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentSymbolProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.inlayHintsProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.colorProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.codeLensProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentRangeFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.onTypeFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.signatureHelpProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.hoverProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentHighlightProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.multiDocumentHighlightProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.selectionRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.foldingRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.linkProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.inlineCompletionsProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.inlineEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.completionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.linkedEditingRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentRangeSemanticTokensProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentSemanticTokensProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentDropEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentPasteEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n    }\n    _score(uri) {\n        return this._notebookTypeResolver?.(uri);\n    }\n}\nregisterSingleton(ILanguageFeaturesService, LanguageFeaturesService, 1 /* InstantiationType.Delayed */);\n","import { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ITextModelService = createDecorator('textModelService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nvar Severity;\n(function (Severity) {\n    Severity[Severity[\"Ignore\"] = 0] = \"Ignore\";\n    Severity[Severity[\"Info\"] = 1] = \"Info\";\n    Severity[Severity[\"Warning\"] = 2] = \"Warning\";\n    Severity[Severity[\"Error\"] = 3] = \"Error\";\n})(Severity || (Severity = {}));\n(function (Severity) {\n    const _error = 'error';\n    const _warning = 'warning';\n    const _warn = 'warn';\n    const _info = 'info';\n    const _ignore = 'ignore';\n    /**\n     * Parses 'error', 'warning', 'warn', 'info' in call casings\n     * and falls back to ignore.\n     */\n    function fromValue(value) {\n        if (!value) {\n            return Severity.Ignore;\n        }\n        if (strings.equalsIgnoreCase(_error, value)) {\n            return Severity.Error;\n        }\n        if (strings.equalsIgnoreCase(_warning, value) || strings.equalsIgnoreCase(_warn, value)) {\n            return Severity.Warning;\n        }\n        if (strings.equalsIgnoreCase(_info, value)) {\n            return Severity.Info;\n        }\n        return Severity.Ignore;\n    }\n    Severity.fromValue = fromValue;\n    function toString(severity) {\n        switch (severity) {\n            case Severity.Error: return _error;\n            case Severity.Warning: return _warning;\n            case Severity.Info: return _info;\n            default: return _ignore;\n        }\n    }\n    Severity.toString = toString;\n})(Severity || (Severity = {}));\nexport default Severity;\n","//#endregion\n//#region Utilities\nexport var FileKind;\n(function (FileKind) {\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n})(FileKind || (FileKind = {}));\n//#endregion\n","import { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IEnvironmentService = createDecorator('environmentService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nexport class MovingAverage {\n    constructor() {\n        this._n = 1;\n        this._val = 0;\n    }\n    update(value) {\n        this._val = this._val + (value - this._val) / this._n;\n        this._n += 1;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\nexport class SlidingWindowAverage {\n    constructor(size) {\n        this._n = 0;\n        this._val = 0;\n        this._values = [];\n        this._index = 0;\n        this._sum = 0;\n        this._values = new Array(size);\n        this._values.fill(0, 0, size);\n    }\n    update(value) {\n        const oldValue = this._values[this._index];\n        this._values[this._index] = value;\n        this._index = (this._index + 1) % this._values.length;\n        this._sum -= oldValue;\n        this._sum += value;\n        if (this._n < this._values.length) {\n            this._n += 1;\n        }\n        this._val = this._sum / this._n;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { OverviewRulerLane } from '../model.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../core/editorColorRegistry.js';\nimport { IModelService } from './model.js';\nimport { Range } from '../core/range.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { minimapInfo, minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\nimport { BidirectionalMap, ResourceMap } from '../../../base/common/map.js';\nimport { diffSets } from '../../../base/common/collections.js';\nlet MarkerDecorationsService = class MarkerDecorationsService extends Disposable {\n    constructor(modelService, _markerService) {\n        super();\n        this._markerService = _markerService;\n        this._onDidChangeMarker = this._register(new Emitter());\n        this._markerDecorations = new ResourceMap();\n        modelService.getModels().forEach(model => this._onModelAdded(model));\n        this._register(modelService.onModelAdded(this._onModelAdded, this));\n        this._register(modelService.onModelRemoved(this._onModelRemoved, this));\n        this._register(this._markerService.onMarkerChanged(this._handleMarkerChange, this));\n    }\n    dispose() {\n        super.dispose();\n        this._markerDecorations.forEach(value => value.dispose());\n        this._markerDecorations.clear();\n    }\n    getMarker(uri, decoration) {\n        const markerDecorations = this._markerDecorations.get(uri);\n        return markerDecorations ? (markerDecorations.getMarker(decoration) || null) : null;\n    }\n    _handleMarkerChange(changedResources) {\n        changedResources.forEach((resource) => {\n            const markerDecorations = this._markerDecorations.get(resource);\n            if (markerDecorations) {\n                this._updateDecorations(markerDecorations);\n            }\n        });\n    }\n    _onModelAdded(model) {\n        const markerDecorations = new MarkerDecorations(model);\n        this._markerDecorations.set(model.uri, markerDecorations);\n        this._updateDecorations(markerDecorations);\n    }\n    _onModelRemoved(model) {\n        const markerDecorations = this._markerDecorations.get(model.uri);\n        if (markerDecorations) {\n            markerDecorations.dispose();\n            this._markerDecorations.delete(model.uri);\n        }\n        // clean up markers for internal, transient models\n        if (model.uri.scheme === Schemas.inMemory\n            || model.uri.scheme === Schemas.internal\n            || model.uri.scheme === Schemas.vscode) {\n            this._markerService?.read({ resource: model.uri }).map(marker => marker.owner).forEach(owner => this._markerService.remove(owner, [model.uri]));\n        }\n    }\n    _updateDecorations(markerDecorations) {\n        // Limit to the first 500 errors/warnings\n        const markers = this._markerService.read({ resource: markerDecorations.model.uri, take: 500 });\n        if (markerDecorations.update(markers)) {\n            this._onDidChangeMarker.fire(markerDecorations.model);\n        }\n    }\n};\nMarkerDecorationsService = __decorate([\n    __param(0, IModelService),\n    __param(1, IMarkerService)\n], MarkerDecorationsService);\nexport { MarkerDecorationsService };\nclass MarkerDecorations extends Disposable {\n    constructor(model) {\n        super();\n        this.model = model;\n        this._map = new BidirectionalMap();\n        this._register(toDisposable(() => {\n            this.model.deltaDecorations([...this._map.values()], []);\n            this._map.clear();\n        }));\n    }\n    update(markers) {\n        // We use the fact that marker instances are not recreated when different owners\n        // update. So we can compare references to find out what changed since the last update.\n        const { added, removed } = diffSets(new Set(this._map.keys()), new Set(markers));\n        if (added.length === 0 && removed.length === 0) {\n            return false;\n        }\n        const oldIds = removed.map(marker => this._map.get(marker));\n        const newDecorations = added.map(marker => {\n            return {\n                range: this._createDecorationRange(this.model, marker),\n                options: this._createDecorationOption(marker)\n            };\n        });\n        const ids = this.model.deltaDecorations(oldIds, newDecorations);\n        for (const removedMarker of removed) {\n            this._map.delete(removedMarker);\n        }\n        for (let index = 0; index < ids.length; index++) {\n            this._map.set(added[index], ids[index]);\n        }\n        return true;\n    }\n    getMarker(decoration) {\n        return this._map.getKey(decoration.id);\n    }\n    _createDecorationRange(model, rawMarker) {\n        let ret = Range.lift(rawMarker);\n        if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1 /* MarkerTag.Unnecessary */) && !this._hasMarkerTag(rawMarker, 2 /* MarkerTag.Deprecated */)) {\n            // * never render hints on multiple lines\n            // * make enough space for three dots\n            ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\n        }\n        ret = model.validateRange(ret);\n        if (ret.isEmpty()) {\n            const maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) ||\n                model.getLineMaxColumn(ret.startLineNumber);\n            if (maxColumn === 1 || ret.endColumn >= maxColumn) {\n                // empty line or behind eol\n                // keep the range as is, it will be rendered 1ch wide\n                return ret;\n            }\n            const word = model.getWordAtPosition(ret.getStartPosition());\n            if (word) {\n                ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\n            }\n        }\n        else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\n            const minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\n            if (minColumn < ret.endColumn) {\n                ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\n                rawMarker.startColumn = minColumn;\n            }\n        }\n        return ret;\n    }\n    _createDecorationOption(marker) {\n        let className;\n        let color = undefined;\n        let zIndex;\n        let inlineClassName = undefined;\n        let minimap;\n        switch (marker.severity) {\n            case MarkerSeverity.Hint:\n                if (this._hasMarkerTag(marker, 2 /* MarkerTag.Deprecated */)) {\n                    className = undefined;\n                }\n                else if (this._hasMarkerTag(marker, 1 /* MarkerTag.Unnecessary */)) {\n                    className = \"squiggly-unnecessary\" /* ClassName.EditorUnnecessaryDecoration */;\n                }\n                else {\n                    className = \"squiggly-hint\" /* ClassName.EditorHintDecoration */;\n                }\n                zIndex = 0;\n                break;\n            case MarkerSeverity.Info:\n                className = \"squiggly-info\" /* ClassName.EditorInfoDecoration */;\n                color = themeColorFromId(overviewRulerInfo);\n                zIndex = 10;\n                minimap = {\n                    color: themeColorFromId(minimapInfo),\n                    position: 1 /* MinimapPosition.Inline */\n                };\n                break;\n            case MarkerSeverity.Warning:\n                className = \"squiggly-warning\" /* ClassName.EditorWarningDecoration */;\n                color = themeColorFromId(overviewRulerWarning);\n                zIndex = 20;\n                minimap = {\n                    color: themeColorFromId(minimapWarning),\n                    position: 1 /* MinimapPosition.Inline */\n                };\n                break;\n            case MarkerSeverity.Error:\n            default:\n                className = \"squiggly-error\" /* ClassName.EditorErrorDecoration */;\n                color = themeColorFromId(overviewRulerError);\n                zIndex = 30;\n                minimap = {\n                    color: themeColorFromId(minimapError),\n                    position: 1 /* MinimapPosition.Inline */\n                };\n                break;\n        }\n        if (marker.tags) {\n            if (marker.tags.indexOf(1 /* MarkerTag.Unnecessary */) !== -1) {\n                inlineClassName = \"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */;\n            }\n            if (marker.tags.indexOf(2 /* MarkerTag.Deprecated */) !== -1) {\n                inlineClassName = \"squiggly-inline-deprecated\" /* ClassName.EditorDeprecatedInlineDecoration */;\n            }\n        }\n        return {\n            description: 'marker-decoration',\n            stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n            className,\n            showIfCollapsed: true,\n            overviewRuler: {\n                color,\n                position: OverviewRulerLane.Right\n            },\n            minimap,\n            zIndex,\n            inlineClassName,\n        };\n    }\n    _hasMarkerTag(marker, tag) {\n        if (marker.tags) {\n            return marker.tags.indexOf(tag) >= 0;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ISemanticTokensStylingService = createDecorator('semanticTokensStylingService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { match as matchGlobPattern } from '../../base/common/glob.js';\nimport { normalize } from '../../base/common/path.js';\nexport function score(selector, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType) {\n    if (Array.isArray(selector)) {\n        // array -> take max individual value\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType);\n            if (value === 10) {\n                return value; // already at the highest\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n    }\n    else if (typeof selector === 'string') {\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n        // short-hand notion, desugars to\n        // 'fooLang' -> { language: 'fooLang'}\n        // '*' -> { language: '*' }\n        if (selector === '*') {\n            return 5;\n        }\n        else if (selector === candidateLanguage) {\n            return 10;\n        }\n        else {\n            return 0;\n        }\n    }\n    else if (selector) {\n        // filter -> select accordingly, use defaults for scheme\n        const { language, pattern, scheme, hasAccessToAllModels, notebookType } = selector; // TODO: microsoft/TypeScript#42768\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n        // selector targets a notebook -> use the notebook uri instead\n        // of the \"normal\" document uri.\n        if (notebookType && candidateNotebookUri) {\n            candidateUri = candidateNotebookUri;\n        }\n        let ret = 0;\n        if (scheme) {\n            if (scheme === candidateUri.scheme) {\n                ret = 10;\n            }\n            else if (scheme === '*') {\n                ret = 5;\n            }\n            else {\n                return 0;\n            }\n        }\n        if (language) {\n            if (language === candidateLanguage) {\n                ret = 10;\n            }\n            else if (language === '*') {\n                ret = Math.max(ret, 5);\n            }\n            else {\n                return 0;\n            }\n        }\n        if (notebookType) {\n            if (notebookType === candidateNotebookType) {\n                ret = 10;\n            }\n            else if (notebookType === '*' && candidateNotebookType !== undefined) {\n                ret = Math.max(ret, 5);\n            }\n            else {\n                return 0;\n            }\n        }\n        if (pattern) {\n            let normalizedPattern;\n            if (typeof pattern === 'string') {\n                normalizedPattern = pattern;\n            }\n            else {\n                // Since this pattern has a `base` property, we need\n                // to normalize this path first before passing it on\n                // because we will compare it against `Uri.fsPath`\n                // which uses platform specific separators.\n                // Refs: https://github.com/microsoft/vscode/issues/99938\n                normalizedPattern = { ...pattern, base: normalize(pattern.base) };\n            }\n            if (normalizedPattern === candidateUri.fsPath || matchGlobPattern(normalizedPattern, candidateUri.fsPath)) {\n                ret = 10;\n            }\n            else {\n                return 0;\n            }\n        }\n        return ret;\n    }\n    else {\n        return 0;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IMarkerDecorationsService = createDecorator('markerDecorationsService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from './codicons.js';\nexport var ThemeColor;\n(function (ThemeColor) {\n    function isThemeColor(obj) {\n        return obj && typeof obj === 'object' && typeof obj.id === 'string';\n    }\n    ThemeColor.isThemeColor = isThemeColor;\n})(ThemeColor || (ThemeColor = {}));\nexport var ThemeIcon;\n(function (ThemeIcon) {\n    ThemeIcon.iconNameSegment = '[A-Za-z0-9]+';\n    ThemeIcon.iconNameExpression = '[A-Za-z0-9-]+';\n    ThemeIcon.iconModifierExpression = '~[A-Za-z]+';\n    ThemeIcon.iconNameCharacter = '[A-Za-z0-9~-]';\n    const ThemeIconIdRegex = new RegExp(`^(${ThemeIcon.iconNameExpression})(${ThemeIcon.iconModifierExpression})?$`);\n    function asClassNameArray(icon) {\n        const match = ThemeIconIdRegex.exec(icon.id);\n        if (!match) {\n            return asClassNameArray(Codicon.error);\n        }\n        const [, id, modifier] = match;\n        const classNames = ['codicon', 'codicon-' + id];\n        if (modifier) {\n            classNames.push('codicon-modifier-' + modifier.substring(1));\n        }\n        return classNames;\n    }\n    ThemeIcon.asClassNameArray = asClassNameArray;\n    function asClassName(icon) {\n        return asClassNameArray(icon).join(' ');\n    }\n    ThemeIcon.asClassName = asClassName;\n    function asCSSSelector(icon) {\n        return '.' + asClassNameArray(icon).join('.');\n    }\n    ThemeIcon.asCSSSelector = asCSSSelector;\n    function isThemeIcon(obj) {\n        return obj && typeof obj === 'object' && typeof obj.id === 'string' && (typeof obj.color === 'undefined' || ThemeColor.isThemeColor(obj.color));\n    }\n    ThemeIcon.isThemeIcon = isThemeIcon;\n    const _regexFromString = new RegExp(`^\\\\$\\\\((${ThemeIcon.iconNameExpression}(?:${ThemeIcon.iconModifierExpression})?)\\\\)$`);\n    function fromString(str) {\n        const match = _regexFromString.exec(str);\n        if (!match) {\n            return undefined;\n        }\n        const [, name] = match;\n        return { id: name };\n    }\n    ThemeIcon.fromString = fromString;\n    function fromId(id) {\n        return { id };\n    }\n    ThemeIcon.fromId = fromId;\n    function modify(icon, modifier) {\n        let id = icon.id;\n        const tildeIndex = id.lastIndexOf('~');\n        if (tildeIndex !== -1) {\n            id = id.substring(0, tildeIndex);\n        }\n        if (modifier) {\n            id = `${id}~${modifier}`;\n        }\n        return { id };\n    }\n    ThemeIcon.modify = modify;\n    function getModifier(icon) {\n        const tildeIndex = icon.id.lastIndexOf('~');\n        if (tildeIndex !== -1) {\n            return icon.id.substring(tildeIndex + 1);\n        }\n        return undefined;\n    }\n    ThemeIcon.getModifier = getModifier;\n    function isEqual(ti1, ti2) {\n        return ti1.id === ti2.id && ti1.color?.id === ti2.color?.id;\n    }\n    ThemeIcon.isEqual = isEqual;\n})(ThemeIcon || (ThemeIcon = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { TreeViewsDnDService } from './treeViewsDnd.js';\nexport const ITreeViewsDnDService = createDecorator('treeViewsDndService');\nregisterSingleton(ITreeViewsDnDService, TreeViewsDnDService, 1 /* InstantiationType.Delayed */);\n"],"names":["encodeSemanticTokensDto","semanticTokens","dest","Uint32Array","result","type","data","length","deltas","delta","encodeSemanticTokensDtoSize","offset","id","set","start","deleteCount","arr","uint8Arr","Uint8Array","buffer","byteOffset","i","len","b0","b1","b2","b3","reverseEndianness","VSBuffer","wrap","toLittleEndianBuffer","IModelService","createDecorator","MarkerSeverity","IMarkerData","compare","a","b","_displayStrings","Object","create","Error","localize","Warning","Info","toString","fromSeverity","severity","Ignore","Hint","toSeverity","emptyString","makeKeyOptionalMessage","markerData","useMessage","source","push","replace","code","value","undefined","message","startLineNumber","startColumn","endLineNumber","endColumn","join","makeKey","IMarkerService","IEditorWorkerService","__param","paramIndex","decorator","target","key","ILanguageFeatureDebounceService","IdentityHash","_hashes","WeakMap","pool","of","obj","get","NullDebounceInformation","constructor","_default","this","_model","update","_value","FeatureDebounceInformation","_logService","_name","_registry","_min","_max","_cache","LRUCache","_key","model","all","reduce","hashVal","doHash","avg","clamp","default","SlidingWindowAverage","newValue","matchesScheme","uri","trace","_overall","MovingAverage","LanguageFeatureDebounceService","envService","_data","Map","_isDev","isExtensionDevelopment","isBuilt","feature","name","config","min","max","extra","info","debug","_overallAverage","values","decorators","desc","d","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__decorate","ILogService","IEnvironmentService","registerSingleton","SemanticTokensStylingService","Disposable","_themeService","_languageService","super","_caches","_register","onDidColorThemeChange","getStyling","provider","has","SemanticTokensProviderStyling","getLegend","IThemeService","ILanguageService","ISemanticTokensStylingService","TreeViewsDnDService","_dragOperations","removeDragOperationTransfer","uuid","operation","delete","DraggedTreeItemsIdentifier","identifier","ILanguageFeaturesService","diffSets","before","after","removed","added","element","intersection","setA","setB","Set","elem","add","fileIconDirectoryRegex","getIconClasses","modelService","languageService","resource","fileKind","icon","ThemeIcon","isThemeIcon","URI","isUri","classes","FileKind","ROOT_FOLDER","FOLDER","scheme","Schemas","DataUri","parseMetaData","META_DATA_LABEL","match","path","cssEscape","toLowerCase","authority","dotSegments","split","slice","detectedLanguageId","languageId","mime","META_DATA_MIME","getLanguageIdByMimeType","getModel","getLanguageId","PLAINTEXT_LANGUAGE_ID","guessLanguageIdByFilepathOrFirstLine","detectLanguageId","str","isExclusive","selector","Array","isArray","every","exclusive","MatchCandidate","notebookUri","notebookType","recursive","equals","other","LanguageFeatureRegistry","_notebookInfoResolver","_clock","_entries","_onDidChange","Emitter","onDidChange","event","register","entry","_score","_time","_lastCandidate","fire","toDisposable","idx","indexOf","splice","_updateScores","ordered","_orderedForEach","orderedGroups","lastBucket","lastBucketScore","callback","notebookInfo","candidate","score","shouldSynchronizeModel","sort","_compareByScoreAndTime","isBuiltinSelector","some","Boolean","isBuiltin","LanguageFeaturesService","referenceProvider","bind","renameProvider","newSymbolNamesProvider","codeActionProvider","definitionProvider","typeDefinitionProvider","declarationProvider","implementationProvider","documentSymbolProvider","inlayHintsProvider","colorProvider","codeLensProvider","documentFormattingEditProvider","documentRangeFormattingEditProvider","onTypeFormattingEditProvider","signatureHelpProvider","hoverProvider","documentHighlightProvider","multiDocumentHighlightProvider","selectionRangeProvider","foldingRangeProvider","linkProvider","inlineCompletionsProvider","inlineEditProvider","completionProvider","linkedEditingRangeProvider","documentRangeSemanticTokensProvider","documentSemanticTokensProvider","documentDropEditProvider","documentPasteEditProvider","_notebookTypeResolver","ITextModelService","Severity","_error","_warning","_info","fromValue","Math","_n","_val","size","_values","_index","_sum","fill","oldValue","MarkerDecorationsService","_markerService","_onDidChangeMarker","_markerDecorations","ResourceMap","getModels","forEach","_onModelAdded","onModelAdded","onModelRemoved","_onModelRemoved","onMarkerChanged","_handleMarkerChange","dispose","clear","getMarker","decoration","markerDecorations","changedResources","_updateDecorations","MarkerDecorations","inMemory","internal","vscode","read","map","marker","owner","remove","markers","take","_map","BidirectionalMap","deltaDecorations","keys","oldIds","newDecorations","range","_createDecorationRange","options","_createDecorationOption","ids","removedMarker","index","getKey","rawMarker","ret","Range","lift","_hasMarkerTag","setEndPosition","validateRange","isEmpty","maxColumn","getLineLastNonWhitespaceColumn","getLineMaxColumn","word","getWordAtPosition","getStartPosition","Number","MAX_VALUE","minColumn","getLineFirstNonWhitespaceColumn","className","color","zIndex","inlineClassName","minimap","themeColorFromId","overviewRulerInfo","minimapInfo","position","overviewRulerWarning","minimapWarning","overviewRulerError","minimapError","tags","description","stickiness","showIfCollapsed","overviewRuler","OverviewRulerLane","Right","tag","candidateUri","candidateLanguage","candidateIsSynchronized","candidateNotebookUri","candidateNotebookType","filter","language","pattern","hasAccessToAllModels","normalizedPattern","base","normalize","fsPath","IMarkerDecorationsService","ThemeColor","isThemeColor","iconNameSegment","iconNameExpression","iconModifierExpression","iconNameCharacter","ThemeIconIdRegex","RegExp","asClassNameArray","exec","Codicon","error","modifier","classNames","substring","asClassName","asCSSSelector","_regexFromString","fromString","fromId","modify","tildeIndex","lastIndexOf","getModifier","isEqual","ti1","ti2","ITreeViewsDnDService"],"ignoreList":[],"sourceRoot":""}